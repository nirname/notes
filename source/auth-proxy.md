# Авторизационный proxy

Идея очень простая и уже очень давно много где реализована.

Ваше приложение находится на одном домене, скажем example.com, и вы хотите
сделать так, чтобы другие ваши приложения, например app.example.com
авторизовывало пользователя, если он уже авторизован на example.com.

Чтобы одно приложение авторизовывало другое можно использовать oauth.
Можно использовать те же самые cookie для поддоменов, что и для основного,
но если они зашифрованы, то надо будет раслкадывать ключи по каждому проекту.
Также, внутри каждого проекта придётся писать свою аутентификацию.

Гораздо проще дела обстоят если все ваши проекты находятся за одним прокси сервером.
От кросдоменных cookie не избавиться, но можно полностью возложить аутентификацию на proxy.

```seqdiag
seqdiag {
  browser => proxy [label = "app.example.com"] {
    proxy -> example.com [label = "auth request"];
    proxy <-- example.com [label = "200"];
    proxy => app.example.com;
  }
}
```
